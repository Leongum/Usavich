<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.usavich.db.product.dao.impl.ProductMapper">
    <resultMap id="productInfo" type="com.usavich.entity.product.Product">
        <id column="PRODUCT_ID" property="productId"/>
        <result column="PRODUCT_NAME" property="productName"/>
        <result column="PRODUCT_DESC" property="productDesc"/>
        <result column="SCORES" property="scores"/>
        <result column="MONEY" property="money"/>
        <result column="TRIGGER_TYPE" property="triggerType"/>
        <result column="LEVEL_LIMIT" property="levelLimit"/>
        <result column="START_TIME" property="startTime"/>
        <result column="END_TIME" property="endTime"/>
        <result column="STATUS" property="status"/>
        <result column="DISCOUNT" property="discount"/>
        <result column="IMAGE" property="image"/>
        <result column="DETAILS" property="details"/>
        <result column="BASE_ACC" property="baseAcc"/>
        <result column="CRIT" property="crit"/>
        <result column="INERTIA" property="inertia"/>
        <result column="LUCK" property="luck"/>
        <result column="LAST_UPDATE_TIME" property="lastUpdateTime"/>
    </resultMap>

    <sql id="productTable">
        PRODUCT_ID,
        PRODUCT_NAME,
        PRODUCT_DESC,
        SCORES,
        MONEY,
        TRIGGER_TYPE,
        LEVEL_LIMIT,
        START_TIME,
        END_TIME,
        STATUS,
        DISCOUNT,
        IMAGE,
        DETAILS,
        BASE_ACC,
        CRIT,
        INERTIA,
        LUCK,
        LAST_UPDATE_TIME
    </sql>

    <select id="getProductById" resultMap="productInfo">
        SELECT
        <include refid="productTable"/>
        FROM PRODUCTS
        WHERE PRODUCT_ID = #{productId}
    </select>

    <select id="getProductListByMinId" resultMap="productInfo">
        SELECT
        <include refid="productTable"/>
        FROM PRODUCTS
        WHERE PRODUCT_ID > #{minProductId}
    </select>

    <select id="getProductListByTime" resultMap="productInfo">
        SELECT
        <include refid="productTable"/>
        FROM PRODUCTS
        WHERE LAST_UPDATE_TIME > #{lastUpdateTime}
    </select>

</mapper>
